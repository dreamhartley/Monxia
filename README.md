<p align="center">
  <img src="https://files.catbox.moe/yl61f2.jpg" alt="Monxia Banner" width="800">
</p>

# æ¢¦åŒ£ (Monxia)

**ç”»å¸ˆ Tag ç®¡ç†å·¥å…·**

æ¢¦åŒ£ï¼ˆMonxiaï¼‰æ˜¯ä¸€ä¸ªä¸“ä¸º AI ç»˜å›¾çˆ±å¥½è€…è®¾è®¡çš„ç”»å¸ˆ Tag ç®¡ç†å·¥å…·ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ é«˜æ•ˆåœ°æ•´ç†ã€æŸ¥è¯¢å’Œç»„åˆç”»å¸ˆ Tagï¼ˆPromptï¼‰ï¼Œæ”¯æŒ NovelAI å’Œ NoobAI ç­‰å¸¸è§æ ¼å¼ã€‚

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.10+-blue.svg)
![React](https://img.shields.io/badge/react-19-blue.svg)
![Docker](https://img.shields.io/badge/docker-ready-blue.svg)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸ¨ ç”»å¸ˆåº“ç®¡ç†**
  - é›†ä¸­ç®¡ç†ç”»å¸ˆä¿¡æ¯ï¼Œæ”¯æŒ NOOB/NAI ä¸¤ç§æ ¼å¼çš„ Tagã€‚
  - æ”¯æŒå¤šåˆ†ç±»æ ‡ç­¾ï¼Œçµæ´»æ•´ç†ç”»å¸ˆèµ„æºã€‚
  - è®°å½•ç”»å¸ˆçš„ Danbooru é“¾æ¥å’Œå¤‡æ³¨ä¿¡æ¯ã€‚

- **ğŸ·ï¸ æ™ºèƒ½è¡¥å…¨ä¸æŠ“å–**
  - **è‡ªåŠ¨è¡¥å…¨**: è¾“å…¥ç”»å¸ˆåç§°ï¼Œè‡ªåŠ¨è¡¥å…¨å¯¹åº”çš„ Tag æ ¼å¼å’Œ Danbooru é“¾æ¥ã€‚
  - **æ•°æ®æŠ“å–**: é›†æˆ Playwright çˆ¬è™«ï¼Œä¸€é”®è·å–ç”»å¸ˆçš„ä½œå“æ•°é‡å’Œæœ€æ–°é¢„è§ˆå›¾ã€‚

- **ğŸ“¦ åˆ†ç±»ä¸é¢„è®¾**
  - **åˆ†ç±»ç®¡ç†**: è‡ªå®šä¹‰åˆ†ç±»ä½“ç³»ï¼Œäº•äº•æœ‰æ¡åœ°ç»„ç»‡æˆç™¾ä¸Šåƒçš„ç”»å¸ˆã€‚
  - **ç”»å¸ˆä¸² (Presets)**: å°†å¤šä¸ªå¸¸ç”¨ç”»å¸ˆç»„åˆæˆ"ç”»å¸ˆä¸²"ï¼Œæ–¹ä¾¿åœ¨ç»˜å›¾è½¯ä»¶ä¸­ä¸€é”®è°ƒç”¨ã€‚

- **ğŸ”’ å®‰å…¨ä¸éšç§**
  - æœ¬åœ°éƒ¨ç½²ï¼Œæ•°æ®å®Œå…¨æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ã€‚
  - å†…ç½®ç™»å½•è®¤è¯ç³»ç»Ÿï¼Œä¿æŠ¤ä½ çš„ç§æœ‰åº“ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Python (Flask), SQLite, Playwright
- **å‰ç«¯**: React, TypeScript, Vite, Tailwind CSS, shadcn/ui

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é»˜è®¤è´¦å·

| ç”¨æˆ·å | å¯†ç  | è¯´æ˜ |
|--------|------|------|
| `admin` | `admin123` | é¦–æ¬¡ç™»å½•åè¯·åŠæ—¶ä¿®æ”¹å¯†ç  |

### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

ä½¿ç”¨ Docker ä¸€é”®éƒ¨ç½²ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ç¯å¢ƒã€‚

```bash
# æ„å»ºé•œåƒ
docker build -t monxia .

# è¿è¡Œå®¹å™¨ï¼ˆæ•°æ®æŒä¹…åŒ–åˆ° ./data ç›®å½•ï¼‰
docker run -d -p 5000:5000 \
  -v ./data:/app/data \
  --name monxia \
  monxia
```

è®¿é—® `http://localhost:5000` å³å¯ä½¿ç”¨ã€‚

### æ–¹å¼äºŒï¼šä¸€é”®å¯åŠ¨è„šæœ¬

#### Windows

> **æ¨è**ï¼šWindows ç”¨æˆ·å¯ç›´æ¥ä¸‹è½½ [Release](https://github.com/dreamhartley/Monxia/releases) ä¸­çš„å…æ„å»ºç‰ˆæœ¬ï¼Œè§£å‹åè¿è¡Œ `start.bat` å³å¯ã€‚

åŒå‡»è¿è¡Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `start.bat`ã€‚

#### Linux / macOS

```bash
chmod +x start.sh  # é¦–æ¬¡è¿è¡Œéœ€è¦æ·»åŠ æ‰§è¡Œæƒé™
./start.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š

1. æ£€æŸ¥ Python å’Œ Node.js ç¯å¢ƒ
2. å®‰è£…å‰ç«¯ä¾èµ–å¹¶æ„å»ºé™æ€æ–‡ä»¶ï¼ˆè¾“å‡ºåˆ° `backend/dist`ï¼‰
3. åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
4. å®‰è£… Python ä¾èµ–å’Œ Playwright æµè§ˆå™¨ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
5. å¯åŠ¨æœåŠ¡

> å¦‚éœ€æ›´æ–°ä¾èµ–ï¼Œåˆ é™¤ `backend/venv` ç›®å½•åé‡æ–°è¿è¡Œè„šæœ¬å³å¯ã€‚

### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨éƒ¨ç½²

#### å‰ææ¡ä»¶

- [Python 3.10+](https://www.python.org/)
- [Node.js 18+](https://nodejs.org/)

#### 1. åç«¯è®¾ç½®

è¿›å…¥ `backend` ç›®å½•å¹¶å®‰è£… Python ä¾èµ–ï¼š

```bash
cd backend

# æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
# python -m venv venv
# source venv/bin/activate  # Linux/Mac
# .\venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£… Playwright æµè§ˆå™¨å†…æ ¸ (ç”¨äºæŠ“å–é¢„è§ˆå›¾)
playwright install chromium
```

#### 2. å‰ç«¯æ„å»º

è¿›å…¥ `frontend` ç›®å½•å¹¶æ„å»ºå‰ç«¯ï¼ˆæ„å»ºäº§ç‰©å°†ç›´æ¥è¾“å‡ºåˆ° `backend/dist`ï¼‰ï¼š

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ˆè¾“å‡ºåˆ° backend/distï¼‰
npm run build
```

#### 3. å¯åŠ¨æœåŠ¡

```bash
cd backend
python run.py
```

æœåŠ¡å°†è¿è¡Œåœ¨ `http://localhost:5000`ï¼ŒåŒæ—¶æä¾›åç«¯ API å’Œå‰ç«¯é¡µé¢ã€‚

#### å¼€å‘æ¨¡å¼

å¦‚éœ€å‰ç«¯çƒ­é‡è½½å¼€å‘ï¼š

```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨åç«¯
cd backend
python run.py

# ç»ˆç«¯2ï¼šå¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend
npm run dev
```

å‰ç«¯å¼€å‘æœåŠ¡å™¨è¿è¡Œåœ¨ `http://localhost:5173`ã€‚

### 3. å¼€å§‹ä½¿ç”¨

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5000`ï¼ˆæˆ–å¼€å‘æ¨¡å¼ä¸‹çš„ `http://localhost:5173`ï¼‰ã€‚
2. ä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦å·ç™»å½•ï¼š
   - **ç”¨æˆ·å**: `admin`
   - **å¯†ç **: `admin123`
3. **é‡è¦**: é¦–æ¬¡ç™»å½•åï¼Œè¯·åŠ¡å¿…åœ¨è®¾ç½®é¡µé¢ä¿®æ”¹é»˜è®¤å¯†ç ã€‚

## ğŸ“‚ æ•°æ®å­˜å‚¨

æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œæ”¯æŒé€šè¿‡ `DATA_DIR` ç¯å¢ƒå˜é‡è‡ªå®šä¹‰æ•°æ®ç›®å½•ã€‚

**é»˜è®¤ç›®å½•ç»“æ„**ï¼ˆæ‰‹åŠ¨éƒ¨ç½²æ—¶åœ¨ `backend/` ä¸‹ï¼‰ï¼š

```
backend/
â”œâ”€â”€ dist/             # å‰ç«¯æ„å»ºäº§ç‰©
â”œâ”€â”€ artists.db        # ç”»å¸ˆã€åˆ†ç±»å’Œé¢„è®¾æ•°æ®
â”œâ”€â”€ config.db         # ç®¡ç†å‘˜è´¦å·å’Œç³»ç»Ÿé…ç½®
â”œâ”€â”€ artist_images/    # ç”»å¸ˆé¢„è§ˆå›¾
â””â”€â”€ backgrounds/      # ç™»å½•èƒŒæ™¯å›¾
```

**Docker éƒ¨ç½²æ—¶**ï¼ˆæ˜ å°„åˆ° `./data/`ï¼‰ï¼š

```
data/
â”œâ”€â”€ artists.db
â”œâ”€â”€ config.db
â”œâ”€â”€ artist_images/
â””â”€â”€ backgrounds/
```

å»ºè®®å®šæœŸå¤‡ä»½æ•°æ®ç›®å½•ã€‚

## ğŸ³ Docker ç›¸å…³

### ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `DATA_DIR` | æ•°æ®å­˜å‚¨ç›®å½• | `/app/data`ï¼ˆå®¹å™¨å†…ï¼‰ |
| `FLASK_ENV` | Flask è¿è¡Œæ¨¡å¼ | `production` |

## ğŸ“„ è®¸å¯è¯

MIT License
